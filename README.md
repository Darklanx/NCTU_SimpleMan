# NCTU SimpleMan

交大課程時間表的爬蟲

不使用難用的UI介面，而是選擇當個簡單、直白的人。

```
"Be a simple, kind of man. Be something, you love and understand."
    - Simple Man, Lynyrd Skynyrd.
```

## 開發紀錄

有課程時間表前端原始碼的幫助，目前可以直接知道後端的API接口



### 調查1

+ 在不同選擇欄位會觸發的query

|fType|get_category|get_college|get_dep|
|:-:|:-:|:-:|:-:|
|學士班課程|1|1|1|
|研究所課程|1|1|1|
|學士班共同課程|1||1|
|其他課程|1||1|
|學分學程|1||1|
|跨領域學程|1||1|
|教育學程|1||1|

從行為可以推論出前後端的狀況，

1. 在選擇教育學程時，實際上在前端只會顯示fType這個欄位，但是還是會發出`get_category`跟`get_dep`兩個請求，其中`get_category`的回傳值為空，即便如此前端還是會再自動發出`get_dep`的請求，從這裡可以大膽猜測，前端的撰寫邏輯是除了學士班課程跟研究所課程之外，所有fType結果都預設會發出`get_category`跟`get_dep`請求。

2. 延續(1.)，在選擇教育學程發出`get_dep`欄位時 formdata 的 fcategory欄位會是上一個選擇的欄位，在瀏覽器端隨便修改這個欄位不會對結果有影響，可以猜測後端的判斷邏輯是當 ftype屬於教育學程時會自動忽略 fcategory 欄位的資料。而前端發現get_type回傳為空的時候應該是直接不修改原本欄位的值。

3. 延續(1.)，在選擇教育學程發出`get_dep` query之後還是會收到回傳值`{unit_id: "0U7", unit_name: "教育學程"}`，這個回傳的值不會顯示在前端中，但是實際進行課程查詢時會一併傳送出去。綜合(1.)、(2.)爬蟲的撰寫行為可以是一旦收到回傳值為非空就直接更新對應欄位，如此產出下一輪的query字串
